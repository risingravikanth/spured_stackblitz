<div>
    <div class="card question-back" *ngIf="validUser && !paramId && isHeader != 'header'">
        <div class="row" style="padding-left: 28px;">
            <div style="width: 20%;">
                <img width="80" height="80" style=" padding: 5px;border-radius: 50px;" alt="ProfilePic" [src]="profileImage">
            </div>
            <hr>
            <div style="width: 80%;">
                <h3 class="question-text">
                    <a class="addQuestion" href="javascript:void(0);" data-toggle="modal" (click)="postQuestionDialog(postDialog)"
                        *ngIf="questionName?.length == 0">Add your question</a>
                    <a class="addQuestion" href="javascript:void(0);" data-toggle="modal" (click)="postQuestionDialog(postDialog)"
                        *ngIf="questionName?.length > 0">Add your question on {{questionName}}
                    </a>
                </h3>
            </div>
        </div>
    </div>
</div>





<!-- Create post dialog code -->
<section>
    <ng-template #postDialog let-c="close" let-d="dismiss">
        <div class="modal-header">
            <h5 class="modal-title" id="modal-basic-title">
                <b>Add Question</b>
            </h5>
            <button type="button" class="close" aria-label="Close" (click)="d('Cross click')">
                <span aria-hidden="true">&times;</span>
            </button>
        </div>
        <form [formGroup]="addPostForm">
            <div class="modal-body" formGroupName="data">
                
                <!-- post dropdowns start -->
                <div class="addPost" style="padding-top:10px;" *ngIf="reqestType != 'BOARD'">
                        <div class="row">
                            <div class="form-group col-md-4">
                                <p-dropdown placeholder=" Type" [options]="types" (onChange)="getCategoriesByType(_type.value)"
                                    [style]="{'width':'100%'}" formControlName="_type1" filter="true" #_type>
                                    <ng-template let-type pTemplate="item">
                                        <div class="ui-helper-clearfix" [style]="{'width':'100%'}">
                                            <span style="vertical-align:middle">{{type.label}}</span>
                                        </div>
                                    </ng-template>
                                </p-dropdown>
                            </div>
                            <div class="form-group col-md-4">
                                <p-dropdown placeholder=" Category" [options]="categories" [style]="{'width':'100%'}"
                                    formControlName="category" filter="true">
                                    <ng-template let-category pTemplate="item">
                                        <div class="ui-helper-clearfix" [style]="{'width':'100%'}">
                                            <span style="vertical-align:middle">{{category.label}}</span>
                                        </div>
                                    </ng-template>
                                </p-dropdown>
                            </div>
                            <div class="form-group col-md-4" *ngIf="addPostForm.controls['data'].get('_type1').value == 'EVENTS' || 
                            addPostForm.controls['data'].get('_type1').value == 'CAREERS' ||
                            addPostForm.controls['data'].get('_type1').value == 'VERBAL' ||
                            addPostForm.controls['data'].get('_type1').value == 'QUANTS' ||
                            addPostForm.controls['data'].get('_type1').value == 'CURRENT_AFFAIRS'">
                                <p-dropdown placeholder=" Model" [options]="models" [style]="{'width':'100%'}"
                                    formControlName="model" filter="true">
                                    <ng-template let-model pTemplate="item">
                                        <div class="ui-helper-clearfix" [style]="{'width':'100%'}">
                                            <span style="vertical-align:middle">{{model.label}}</span>
                                        </div>
                                    </ng-template>
                                </p-dropdown>
                            </div>
                        </div>
    
                        <!-- events -->
                        <div class="row" *ngIf="addPostForm.controls['data'].get('_type1').value == 'EVENTS'">
                            <div class="form-group col-md-6">
                                <p-calendar [inputStyleClass]="form-control" [showIcon]="true" dateFormat="yy-mm-dd"
                                    formControlName="fromDate" placeholder="From Date" [style]="{'width':'95%'}" [minDate]="dateMin"
                                    dataType='string' [inputStyle]="{'width':'95%'}"></p-calendar>
                            </div>
                            <div class="form-group col-md-6">
                                <p-calendar [inputStyleClass]="form-control" [showIcon]="true" dateFormat="yy-mm-dd"
                                    formControlName="toDate" placeholder="To Date" [style]="{'width':'95%'}" dataType='string'
                                    [inputStyle]="{'width':'95%'}"></p-calendar>
                            </div>
    
                        </div>
                        <div class="row" *ngIf="addPostForm.controls['data'].get('_type1').value == 'EVENTS'">
                            <div class="form-group col-md-6">
                                <input class="form-control form-control-sm" type="text" formControlName="contacts"
                                    placeholder="Contacts">
                            </div>
                            <div class="form-group col-md-6">
                                <input class="form-control form-control-sm" type="text" formControlName="website"
                                    placeholder="Website">
                            </div>
                        </div>
                        <!-- events end -->
    
                        <!-- careers -->
                        <div class="col-md-4" *ngIf="addPostForm.controls['data'].get('_type1').value == 'CAREERS'">
                            <p-calendar [inputStyleClass]="form-control" [showIcon]="true" dataType='string' dateFormat="yy-mm-dd"
                                formControlName="deadline" placeholder="Deadline" [style]="{'width':'95%'}" [minDate]="dateMin"
                                [inputStyle]="{'width':'95%'}"></p-calendar>
                        </div>
                        <!-- careers end -->
                    </div>
                    <!-- post dropdowns end -->

                <div class="form-group" style="padding:12px;">
                    <textarea class="form-control" rows="1" maxlength="300" formControlName="title" placeholder="Question title(max 300Chars)"></textarea>
                </div>
                <div class="form-group" style="padding: 1px 12px 1px 12px;">
                    <textarea class="form-control" rows="4" formControlName="postText" placeholder="Question description"></textarea>
                </div>
                <div class="form-group" style="padding:12px;" *ngIf="
                addPostForm.controls['data'].get('_type1').value == 'DATA_INTERPRETATION' ||
                addPostForm.controls['data'].get('_type1').value == 'VERBAL' ||
                addPostForm.controls['data'].get('_type1').value == 'QUANTS' ||
                addPostForm.controls['data'].get('_type1').value == 'NEWS' ||
                addPostForm.controls['data'].get('_type1').value == 'GENERAL_KNOWLEDGE' ||
                addPostForm.controls['data'].get('_type1').value == 'CURRENT_AFFAIRS'">
                    <textarea class="form-control" rows="2" maxlength="300" formControlName="answer" placeholder="Answer"></textarea>
                </div>
                
                <!-- Images list start-->
                <div class="addPost">
                    <div style="padding-left: 50px;padding-right: 3px;">
                        <span *ngFor="let url of urls;index as in;">
                            <figure>
                                <img [src]="url" class="rounded mb-3" style="margin-left: 10px;" width="150" height="150">
                                <figcaption><a href="javascript:void(0);" (click)="removeFromImages(in)">Remove</a></figcaption>
                            </figure>
                        </span>
                    </div>
                </div>
                <!-- Images list end-->
            </div>
            <!-- model end-->

            <ul class="list-inline postIcons">
                <span class="btn btn-light btn-file">
                    <i class="fas fa-camera"></i> Browse photos
                    <input type="file" accept="image/gif, image/jpeg, image/jpg, image/png" multiple (change)="detectFiles($event)">
                </span>
            </ul>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary btnSuccess" [disabled]="addPostForm.invalid" (click)="createPost()">{{postBtnTxt}}</button>
            </div>
        </form>
    </ng-template>
</section>
<section>
    <!-- Create post dialog code -->