<!-- [class.posFix]="!isMobile" -->
<!-- [class.scrollY]="!isMobile" -->
<section>
    <div [class.scrollMobile]="isMobile">
        <!-- BOARDS -->
        <div *ngIf="validUser">
            <ul style="margin-left: 25px;padding-top: 10px;font-size: 15px; line-height: 1.7;">
                <!--<li style="padding-right: 60px;">
                V1.0
                commented for make + icon visible in clear
            -->
            	<li >
                    <label>
                        <b>Boards</b>
                    </label>
                    <!-- <span class="float-right" *ngIf="!showConfig">
                    <a href="javascript:void(0);" class="sectionOptIconsColor" (click)="showConfig = true">
                        <i class="fas fa-cog"></i>
                    </a>
                </span> -->
                    <span class="float-right">
                        <a href="javascript:void(0);" class="sectionOptIconsColor" placement="right" ngbTooltip="Add new board"  (click)="showAddBoardDialog(addBoardDialog)">
                            <i class="fas fa-plus"></i>
                        </a>
                        <!-- <a href="javascript:void(0);" class="sectionOptIconsColor" (click)="showConfig = false">
                        <i class="fas fa-times"></i>
                    </a> -->
                    </span>
                </li>
                <div style="margin-left: 50%;" *ngIf="showPostSpinner">
                    <div class="loader"></div>
                </div>
                <div *ngIf="noBoards" style="margin-left: 16px;">No boards</div>
                <div style="width: 82%;">
                    <li *ngFor="let board of boardsList" class="overflowText">
                        <a href="javascript:void(0);" style="color: black;" (click)="selectedBoard(board.boardId,board.boardName)"
                            [class.selected]="'BOARD_'+board.boardId === selectedItem">
                            {{board.boardName}}</a>
                        <span class="float-right" *ngIf="showConfig">
                            <a href="javascript:void(0);" class="sectionOptIconsColor">
                                <i class="fas fa-trash"></i>
                            </a>
                        </span>
                    </li>
                </div>
            </ul>
        </div>

        <!-- TOPICS -->
        <div>
            <ul *ngFor="let menu of menuList" style="margin-left: 25px;padding-top: 10px;font-size: 15px; line-height: 1.7;">
                <li>
                    <label>
                        <b>{{menu.title}}</b>
                    </label>
                    <!-- <span class="float-right" *ngIf="!menu.select">
                    <a href="javascript:void(0);" class="sectionOptIconsColor" (click)="menu.select = true">
                        <i class="fas fa-cog"></i>
                    </a>
                </span> -->
                    <span class="float-right" *ngIf="menu.select">
                        <a href="javascript:void(0);" class="sectionOptIconsColor" (click)="showAddSectionDialog(sectionDialog)">
                            <i class="fas fa-plus"></i>
                        </a>
                        <a href="javascript:void(0);" class="sectionOptIconsColor" (click)="saveSectionSettings()">
                            <i class="fas fa-check"></i>
                        </a>
                        <a href="javascript:void(0);" class="sectionOptIconsColor" (click)="menu.select = false">
                            <i class="fas fa-times"></i>
                        </a>
                    </span>
                </li>
                <li *ngFor="let section of menu.sections" [ngClass]="{active: isActive(section.code)}" style="padding-bottom: 5px;width: 226px;">
                    <span>
                        <span (click)="select(section.code);">
                            <i class="fas fa-chevron-right" *ngIf="!isActive(section.code)"></i>
                            <i class="fas fa-chevron-down" *ngIf="isActive(section.code)"></i>&nbsp;&nbsp;
                            {{section.name}}
                        </span>
                        <span class="float-right" style="padding-left: 20px;" *ngIf="menu.select">
                            <a href="javascript:void(0);" (click)="showAddCategoryDialog(categoryDialog)" class="sectionOptIconsColor">
                                <i class="fas fa-plus"></i>
                            </a>
                            <a href="javascript:void(0);" class="sectionOptIconsColor">
                                <i class="fas fa-times"></i>
                            </a>
                        </span>
                    </span>
                    <!-- [queryParams]="{'type':section.code,'category':category.name } -->
                    <ul style="display:none; margin-left: -10px;">
                        <li *ngFor="let category of section.categories" class="overflowText">
                            <a style="width: 82%;" href="javascript:void(0);" style="color: black;" [routerLink]="['/categories' + '/' + section.code + '/'+ category.code]"
                                title={{category.name}}
								(click)="selectedCategory(section.code, category.code)" [class.selected]="section.code+category.code === selectedItem">
                                {{category.name}}</a>
                            <span class="float-right" *ngIf="menu.select">
                                <a href="javascript:void(0);" class="sectionOptIconsColor" *ngIf="category.name != 'HOME'">
                                    <i class="fas fa-trash"></i>
                                </a>
                            </span>
                        </li>
                    </ul>
                </li>
            </ul>
        </div>
    </div>
</section>


<!-- Dialog box -->
<section>
    <ng-template #addBoardDialog let-c="close" let-d="dismiss">
        <div class="modal-header">
            <h4 class="modal-title fntGreen" id="modal-basic-title">Add Board</h4>
            <button type="button" class="close" aria-label="Close" (click)="d('Cross click')">
                <span aria-hidden="true">&times;</span>
            </button>
        </div>
        <ul class="nav nav-tabs" id="myTab" role="tablist">
            <li class="nav-item">
                <a class="nav-link active" id="home-tab" data-toggle="tab" href="#home" role="tab" aria-controls="home"
                    aria-selected="true">Join/Reuest New board</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" id="pending-tab" data-toggle="tab" href="#pending" role="tab" aria-controls="pending"
                    aria-selected="false">Pending Requests</a>
            </li>
        </ul>
        <div class="tab-content" id="myTabContent">
            <div class="tab-pane fade show active" id="home" role="tabpanel" aria-labelledby="home-tab">
                <div class="modal-body">
                    <form [formGroup]="addBoardForm">
                        <div class="form-group">
                            <label>State: </label>
                            <p-dropdown placeholder=" State" formControlName="stateId" [options]="listOfStates" [style]="{'width':'100%'}"
                                filter="true" (onChange)="getInstitutesByState(state.value)" #state>
                                <ng-template let-state pTemplate="item">
                                    <div class="ui-helper-clearfix">
                                        <span style="vertical-align:middle">{{state.label}}</span>
                                    </div>
                                </ng-template>
                            </p-dropdown>
                        </div>
                        <div class="form-group">
                            <label>Institute: </label>
                            <p-dropdown *ngIf="!noInstCheck" placeholder="Institute" formControlName="instId" [options]="listOfInstitutes"
                                [style]="{'width':'100%'}" filter="true" (onChange)="getDepartmentsByInstId(inst.value)"
                                #inst>
                                <ng-template let-inst pTemplate="item">
                                    <div class="ui-helper-clearfix">
                                        <span style="vertical-align:middle">{{inst.label}}</span>
                                    </div>
                                </ng-template>
                            </p-dropdown>
                            <div class="row" *ngIf="noInstCheck">
                                <div class="col-md-6">
                                    <input class="form-control" formControlName="instName" placeholder="institute" type="text">
                                </div>
                                <div class="col-md-6">
                                    <input class="form-control" formControlName="instAddr" placeholder="institute address"
                                        type="text">
                                </div>
                            </div>
                            <input [disabled]="!showInst" type="checkbox" [ngModelOptions]="{standalone: true}"
                                [(ngModel)]="noInstCheck" data-md-icheck (change)="requestCheckBox($event,'INSTITUTE')" />
                            No Institute
                        </div>
                        <div class="form-group">
                            <label>Department: </label>
                            <p-dropdown *ngIf="!noDeptCheck" placeholder="Department" formControlName="deptId"
                                [options]="listOfDepartments" [style]="{'width':'100%'}" filter="true" (onChange)="getBoardsByDepartment(dept.value)"
                                #dept>
                                <ng-template let-dept pTemplate="item">
                                    <div class="ui-helper-clearfix">
                                        <span style="vertical-align:middle">{{dept.label}}</span>
                                    </div>
                                </ng-template>
                            </p-dropdown>
                            <input class="form-control" *ngIf="noDeptCheck" formControlName="deptName" placeholder="department"
                                type="text">
                            <input [disabled]="!showDept" type="checkbox" [ngModelOptions]="{standalone: true}"
                                [(ngModel)]="noDeptCheck" data-md-icheck (change)="requestCheckBox($event, 'DEPARTMENT')" />
                            No Department
                        </div>
                        <div class="form-group">
                            <label>Boards: </label>
                            <p-dropdown *ngIf="!noBordCheck" placeholder="Board" formControlName="boardId" [options]="listOfBoards"
                                [style]="{'width':'100%'}" filter="true" #board>
                                <ng-template let-board pTemplate="item">
                                    <div class="ui-helper-clearfix">
                                        <span style="vertical-align:middle">{{board.label}}</span>
                                    </div>
                                </ng-template>
                            </p-dropdown>
                            <div class="row" *ngIf="noBordCheck">
                                <div class="col-md-6">
                                    <input class="form-control" formControlName="startYear" placeholder="start year"
                                        type="number">
                                </div>
                                <div class="col-md-6">
                                    <input class="form-control" formControlName="endYear" placeholder="end year" type="number">
                                </div>
                            </div>
                            <input [disabled]="!showBoard" type="checkbox" [ngModelOptions]="{standalone: true}"
                                [(ngModel)]="noBordCheck" data-md-icheck (change)="requestCheckBox($event, 'BOARD')" />
                            No Board
                        </div>
                        <textarea class="form-control" *ngIf="noDeptCheck || noBordCheck || noInstCheck"
                            formControlName="comments" placeholder="comments" type="text"></textarea>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-success" (click)="joinRequest()" [disabled]="addBoardForm.invalid">Join
                        Request</button>
                </div>
            </div>
            <div class="tab-pane fade" id="pending" role="tabpanel" aria-labelledby="pending-tab">
                <div style="padding: 10px 0px 0px 35px;" *ngFor="let request of pendingBoardsInfo">
                    <div class="row">
                        <div class="col-md-8">
                            <span style="font-size: 20px;">
                                {{request.boardInfo ? request.boardInfo.boardName : '-NA-'}} <span class="boardsPendingInfo"
                                    *ngIf="request.statusName == 'Pending'" style="color:green;font-size: 12px;">
                                    ({{request.statusName}})
                                </span>
                                <span class="boardsPendingInfo" *ngIf="request.statusName == 'Rejected'" style="color:red;">
                                    ({{request.statusName}})
                                </span>
                            </span>
                            <div *ngIf="request.statusName == 'Pending'">
                                <p class="text-muted" style="font-size: 12px;">RequstedTime: {{request.create_time |
                                    date: 'MMM d, y,
                                    h:mm:ss a'}}</p>
                            </div>
                            <div *ngIf="request.statusName == 'Rejected'">
                                <p class="text-muted" style="font-size: 12px;">RequstedTime: {{request.update_time |
                                    date: 'MMM d, y,
                                    h:mm:ss a'}}</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </ng-template>
</section>